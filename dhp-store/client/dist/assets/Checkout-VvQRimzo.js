import{g as Fe,h,r as g,b as qe,a as Ge,c as Ke,d as ne,j as a}from"./index-6ptmoPL4.js";function H(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?H=function(e){return typeof e}:H=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(t)}var Ee="clover",Je=function(e){return e===3?"v3":e},xe="https://js.stripe.com",Ye="".concat(xe,"/").concat(Ee,"/stripe.js"),ze=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Xe=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var Qe=function(e){return ze.test(e)||Xe.test(e)},He=function(){for(var e=document.querySelectorAll('script[src^="'.concat(xe,'"]')),r=0;r<e.length;r++){var n=e[r];if(Qe(n.src))return n}return null},de=function(e){var r="",n=document.createElement("script");n.src="".concat(Ye).concat(r);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(n),n},Ze=function(e,r){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"8.6.4",startTime:r})},J=null,X=null,Q=null,et=function(e){return function(r){e(new Error("Failed to load Stripe.js",{cause:r}))}},tt=function(e,r){return function(){window.Stripe?e(window.Stripe):r(new Error("Stripe.js not available"))}},rt=function(e){return J!==null?J:(J=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe){r(window.Stripe);return}try{var o=He();if(!(o&&e)){if(!o)o=de(e);else if(o&&Q!==null&&X!==null){var s;o.removeEventListener("load",Q),o.removeEventListener("error",X),(s=o.parentNode)===null||s===void 0||s.removeChild(o),o=de(e)}}Q=tt(r,n),X=et(n),o.addEventListener("load",Q),o.addEventListener("error",X)}catch(c){n(c);return}}),J.catch(function(r){return J=null,Promise.reject(r)}))},nt=function(e,r,n){if(e===null)return null;var o=r[0];if(typeof o!="string")throw new Error("Expected publishable key to be of type string, got type ".concat(H(o)," instead."));var s=o.match(/^pk_test/),c=Je(e.version),d=Ee;s&&c!==d&&console.warn("Stripe.js@".concat(c," was loaded on the page, but @stripe/stripe-js@").concat("8.6.4"," expected Stripe.js@").concat(d,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var i=e.apply(void 0,r);return Ze(i,n),i},Y,je=!1,Ce=function(){return Y||(Y=rt(null).catch(function(e){return Y=null,Promise.reject(e)}),Y)};Promise.resolve().then(function(){return Ce()}).catch(function(t){je||console.warn(t)});var at=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];je=!0;var o=Date.now();return Ce().then(function(s){return nt(s,r,o)})},Ne={exports:{}},st="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ot=st,it=ot;function Pe(){}function we(){}we.resetWarningCache=Pe;var ct=function(){function t(n,o,s,c,d,i){if(i!==it){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:we,resetWarningCache:Pe};return r.PropTypes=r,r};Ne.exports=ct();var lt=Ne.exports;const y=Fe(lt);function pe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function fe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pe(Object(r),!0).forEach(function(n){Re(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Z(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Z=function(e){return typeof e}:Z=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(t)}function Re(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ut(t,e){if(t==null)return{};var r={},n=Object.keys(t),o,s;for(s=0;s<n.length;s++)o=n[s],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}function dt(t,e){if(t==null)return{};var r=ut(t,e),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)n=s[o],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Oe(t,e){return pt(t)||ft(t,e)||mt(t,e)||ht()}function pt(t){if(Array.isArray(t))return t}function ft(t,e){var r=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(r!=null){var n=[],o=!0,s=!1,c,d;try{for(r=r.call(t);!(o=(c=r.next()).done)&&(n.push(c.value),!(e&&n.length===e));o=!0);}catch(i){s=!0,d=i}finally{try{!o&&r.return!=null&&r.return()}finally{if(s)throw d}}return n}}function mt(t,e){if(t){if(typeof t=="string")return me(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return me(t,e)}}function me(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ht(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var C=function(e,r,n){var o=!!n,s=h.useRef(n);h.useEffect(function(){s.current=n},[n]),h.useEffect(function(){if(!o||!e)return function(){};var c=function(){s.current&&s.current.apply(s,arguments)};return e.on(r,c),function(){e.off(r,c)}},[o,r,e,s])},ae=function(e){var r=h.useRef(e);return h.useEffect(function(){r.current=e},[e]),r.current},F=function(e){return e!==null&&Z(e)==="object"},vt=function(e){return F(e)&&typeof e.then=="function"},yt=function(e){return F(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},he="[object Object]",gt=function t(e,r){if(!F(e)||!F(r))return e===r;var n=Array.isArray(e),o=Array.isArray(r);if(n!==o)return!1;var s=Object.prototype.toString.call(e)===he,c=Object.prototype.toString.call(r)===he;if(s!==c)return!1;if(!s&&!n)return e===r;var d=Object.keys(e),i=Object.keys(r);if(d.length!==i.length)return!1;for(var u={},p=0;p<d.length;p+=1)u[d[p]]=!0;for(var S=0;S<i.length;S+=1)u[i[S]]=!0;var v=Object.keys(u);if(v.length!==d.length)return!1;var m=e,O=r,f=function(k){return t(m[k],O[k])};return v.every(f)},Ae=function(e,r,n){return F(e)?Object.keys(e).reduce(function(o,s){var c=!F(r)||!gt(e[s],r[s]);return n.includes(s)?(c&&console.warn("Unsupported prop change: options.".concat(s," is not a mutable property.")),o):c?fe(fe({},o||{}),{},Re({},s,e[s])):o},null):null},ke="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",ve=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ke;if(e===null||yt(e))return e;throw new Error(r)},St=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ke;if(vt(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(o){return ve(o,r)})};var n=ve(e,r);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},bt=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"5.4.1"}),e.registerAppInfo({name:"react-stripe-js",version:"5.4.1",url:"https://stripe.com/docs/stripe-js/react"}))},ee=h.createContext(null);ee.displayName="ElementsContext";var Ie=function(e,r){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(r," in an <Elements> provider."));return e},Te=function(e){var r=e.stripe,n=e.options,o=e.children,s=h.useMemo(function(){return St(r)},[r]),c=h.useState(function(){return{stripe:s.tag==="sync"?s.stripe:null,elements:s.tag==="sync"?s.stripe.elements(n):null}}),d=Oe(c,2),i=d[0],u=d[1];h.useEffect(function(){var v=!0,m=function(f){u(function(A){return A.stripe?A:{stripe:f,elements:f.elements(n)}})};return s.tag==="async"&&!i.stripe?s.stripePromise.then(function(O){O&&v&&m(O)}):s.tag==="sync"&&!i.stripe&&m(s.stripe),function(){v=!1}},[s,i,n]);var p=ae(r);h.useEffect(function(){p!==null&&p!==r&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[p,r]);var S=ae(n);return h.useEffect(function(){if(i.elements){var v=Ae(n,S,["clientSecret","fonts"]);v&&i.elements.update(v)}},[n,S,i.elements]),h.useEffect(function(){bt(i.stripe)},[i.stripe]),h.createElement(ee.Provider,{value:i},o)};Te.propTypes={stripe:y.any,options:y.object};var Et=function(e){var r=h.useContext(ee);return Ie(r,e)},xt=function(){var e=Et("calls useElements()"),r=e.elements;return r};y.func.isRequired;var _e=h.createContext(null);_e.displayName="CheckoutContext";y.any,y.shape({clientSecret:y.oneOfType([y.string,y.instanceOf(Promise)]).isRequired,elementsOptions:y.object}).isRequired;var se=function(e){var r=h.useContext(_e),n=h.useContext(ee);if(r){if(n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return r}else return Ie(n,e)},jt=["mode"],Ct=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},w=function(e,r){var n="".concat(Ct(e),"Element"),o=function(i){var u=i.id,p=i.className,S=i.options,v=S===void 0?{}:S,m=i.onBlur,O=i.onFocus,f=i.onReady,A=i.onChange,k=i.onEscape,W=i.onClick,_=i.onLoadError,q=i.onLoaderStart,I=i.onNetworksChange,G=i.onConfirm,K=i.onCancel,D=i.onShippingAddressChange,B=i.onShippingRateChange,l=i.onSavedPaymentMethodRemove,E=i.onSavedPaymentMethodUpdate,T=se("mounts <".concat(n,">")),N="elements"in T?T.elements:null,L="checkoutState"in T?T.checkoutState:null,U=(L==null?void 0:L.type)==="success"||(L==null?void 0:L.type)==="loading"?L.sdk:null,Ve=h.useState(null),ie=Oe(Ve,2),j=ie[0],We=ie[1],M=h.useRef(null),te=h.useRef(null);C(j,"blur",m),C(j,"focus",O),C(j,"escape",k),C(j,"click",W),C(j,"loaderror",_),C(j,"loaderstart",q),C(j,"networkschange",I),C(j,"confirm",G),C(j,"cancel",K),C(j,"shippingaddresschange",D),C(j,"shippingratechange",B),C(j,"savedpaymentmethodremove",l),C(j,"savedpaymentmethodupdate",E),C(j,"change",A);var re;f&&(e==="expressCheckout"?re=f:re=function(){f(j)}),C(j,"ready",re),h.useLayoutEffect(function(){if(M.current===null&&te.current!==null&&(N||U)){var x=null;if(U)switch(e){case"paymentForm":x=U.createPaymentFormElement();break;case"payment":x=U.createPaymentElement(v);break;case"address":if("mode"in v){var le=v.mode,ue=dt(v,jt);if(le==="shipping")x=U.createShippingAddressElement(ue);else if(le==="billing")x=U.createBillingAddressElement(ue);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":x=U.createExpressCheckoutElement(v);break;case"currencySelector":x=U.createCurrencySelectorElement();break;case"taxId":x=U.createTaxIdElement(v);break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else N&&(x=N.create(e,v));M.current=x,We(x),x&&x.mount(te.current)}},[N,U,v]);var ce=ae(v);return h.useEffect(function(){if(M.current){var x=Ae(v,ce,["paymentRequest"]);x&&"update"in M.current&&M.current.update(x)}},[v,ce]),h.useLayoutEffect(function(){return function(){if(M.current&&typeof M.current.destroy=="function")try{M.current.destroy(),M.current=null}catch{}}},[]),h.createElement("div",{id:u,className:p,ref:te})},s=function(i){se("mounts <".concat(n,">"));var u=i.id,p=i.className;return h.createElement("div",{id:u,className:p})},c=r?s:o;return c.propTypes={id:y.string,className:y.string,onChange:y.func,onBlur:y.func,onFocus:y.func,onReady:y.func,onEscape:y.func,onClick:y.func,onLoadError:y.func,onLoaderStart:y.func,onNetworksChange:y.func,onConfirm:y.func,onCancel:y.func,onShippingAddressChange:y.func,onShippingRateChange:y.func,onSavedPaymentMethodRemove:y.func,onSavedPaymentMethodUpdate:y.func,options:y.object},c.displayName=n,c.__elementType=e,c},R=typeof window>"u",Nt=h.createContext(null);Nt.displayName="EmbeddedCheckoutProviderContext";var Pt=function(){var e=se("calls useStripe()"),r=e.stripe;return r};w("auBankAccount",R);w("card",R);w("cardNumber",R);w("cardExpiry",R);w("cardCvc",R);w("iban",R);var wt=w("payment",R);w("expressCheckout",R);w("paymentRequestButton",R);w("linkAuthentication",R);w("address",R);w("shippingAddress",R);w("paymentMethodMessaging",R);w("taxId",R);/*!
 * react-paypal-js v8.9.2 (2025-10-02T20:17:55.069Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P;(function(t){t.INITIAL="initial",t.PENDING="pending",t.REJECTED="rejected",t.RESOLVED="resolved"})(P||(P={}));var $;(function(t){t.LOADING_STATUS="setLoadingStatus",t.RESET_OPTIONS="resetOptions",t.SET_BRAINTREE_INSTANCE="braintreeInstance"})($||($={}));var ye;(function(t){t.NUMBER="number",t.CVV="cvv",t.EXPIRATION_DATE="expirationDate",t.EXPIRATION_MONTH="expirationMonth",t.EXPIRATION_YEAR="expirationYear",t.POSTAL_CODE="postalCode"})(ye||(ye={}));var b=function(){return b=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},b.apply(this,arguments)};function De(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);return r}function ge(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,s;n<o;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}var z="data-react-paypal-script-id",V={DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource"},Rt="Failed to load the PayPal JS SDK script.",Le="paypal",Ot="usePayPalScriptReducer must be used within a PayPalScriptProvider";function At(t){return t===void 0&&(t=Le),window[t]}function kt(t){for(var e="",r=0;r<t.length;r++){var n=t[r].charCodeAt(0)*r;t[r+1]&&(n+=t[r+1].charCodeAt(0)*(r-1)),e+=String.fromCharCode(97+Math.abs(n)%26)}return e}function It(t){var e=t.reactComponentName,r=t.sdkComponentKey,n=t.sdkRequestedComponents,o=n===void 0?"":n,s=t.sdkDataNamespace,c=s===void 0?Le:s,d=r.charAt(0).toUpperCase().concat(r.substring(1)),i="Unable to render <".concat(e," /> because window.").concat(c,".").concat(d," is undefined."),u=typeof o=="string"?o:o.join(",");if(!u.includes(r)){var p=[u,r].filter(Boolean).join();i+=`
To fix the issue, add '`.concat(r,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(p,"'}}>`.")}return i}function Ue(t){var e=t,r=z;e[r];var n=De(e,[r+""]);return"react-paypal-js-".concat(kt(JSON.stringify(n)))}function Tt(t){var e=self.document.querySelector("script[".concat(z,'="').concat(t,'"]'));e!=null&&e.parentNode&&e.parentNode.removeChild(e)}function _t(t,e){var r,n;switch(e.type){case $.LOADING_STATUS:return typeof e.value=="object"?b(b({},t),{loadingStatus:e.value.state,loadingStatusErrorMessage:e.value.message}):b(b({},t),{loadingStatus:e.value});case $.RESET_OPTIONS:return Tt(t.options[z]),b(b({},t),{loadingStatus:P.PENDING,options:b(b((r={},r[V.DATA_SDK_INTEGRATION_SOURCE]=V.DATA_LIBRARY_VALUE,r),e.value),(n={},n[z]="".concat(Ue(e.value)),n))});case $.SET_BRAINTREE_INSTANCE:return b(b({},t),{braintreePayPalCheckoutInstance:e.value});default:return t}}var Me=g.createContext(null);function Dt(t){if(typeof(t==null?void 0:t.dispatch)=="function"&&t.dispatch.length!==0)return t;throw new Error(Ot)}function Lt(){var t=Dt(g.useContext(Me)),e=b(b({},t),{isInitial:t.loadingStatus===P.INITIAL,isPending:t.loadingStatus===P.PENDING,isResolved:t.loadingStatus===P.RESOLVED,isRejected:t.loadingStatus===P.REJECTED});return[e,t.dispatch]}g.createContext({});function Ut(t){var e=g.useRef(new Proxy({},{get:function(r,n,o){return typeof r[n]=="function"?function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return r[n].apply(r,s)}:Reflect.get(r,n,o)}}));return e.current=Object.assign(e.current,t),e.current}var oe=function(t){var e,r=t.className,n=r===void 0?"":r,o=t.disabled,s=o===void 0?!1:o,c=t.children,d=t.forceReRender,i=d===void 0?[]:d,u=De(t,["className","disabled","children","forceReRender"]),p=s?{opacity:.38}:{},S="".concat(n," ").concat(s?"paypal-buttons-disabled":"").trim(),v=g.useRef(null),m=g.useRef(null),O=Ut(u),f=Lt()[0],A=f.isResolved,k=f.options,W=g.useState(null),_=W[0],q=W[1],I=g.useState(!0),G=I[0],K=I[1],D=g.useState(null),B=D[1];function l(){m.current!==null&&m.current.close().catch(function(){})}return!((e=m.current)===null||e===void 0)&&e.updateProps&&m.current.updateProps({message:u.message}),g.useEffect(function(){if(A===!1)return l;var E=At(k.dataNamespace);if(E===void 0||E.Buttons===void 0)return B(function(){throw new Error(It({reactComponentName:oe.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:k.components,sdkDataNamespace:k[V.DATA_NAMESPACE]}))}),l;var T=function(N,L){q(L),typeof u.onInit=="function"&&u.onInit(N,L)};try{m.current=E.Buttons(b(b({},O),{onInit:T}))}catch(N){return B(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(N))})}return m.current.isEligible()===!1?(K(!1),l):(v.current&&m.current.render(v.current).catch(function(N){v.current===null||v.current.children.length===0||B(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(N))})}),l)},ge(ge([A],i,!0),[u.fundingSource],!1)),g.useEffect(function(){_!==null&&(s===!0?_.disable().catch(function(){}):_.enable().catch(function(){}))},[s,_]),h.createElement(h.Fragment,null,G?h.createElement("div",{ref:v,style:p,className:S}):c)};oe.displayName="PayPalButtons";function Mt(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);return r}function Bt(t,e){var r=document.querySelector('script[src="'.concat(t,'"]'));if(r===null)return null;var n=Be(t,e),o=r.cloneNode();if(delete o.dataset.uidAuto,Object.keys(o.dataset).length!==Object.keys(n.dataset).length)return null;var s=!0;return Object.keys(o.dataset).forEach(function(c){o.dataset[c]!==n.dataset[c]&&(s=!1)}),s?r:null}function $t(t){var e=t.url,r=t.attributes,n=t.onSuccess,o=t.onError,s=Be(e,r);s.onerror=o,s.onload=n,document.head.insertBefore(s,document.head.firstElementChild)}function Vt(t){var e=t.sdkBaseUrl,r=t.environment,n=Mt(t,["sdkBaseUrl","environment"]),o=e||qt(r),s=n,c=Object.keys(s).filter(function(u){return typeof s[u]<"u"&&s[u]!==null&&s[u]!==""}).reduce(function(u,p){var S=s[p].toString();return p=Wt(p),p.substring(0,4)==="data"||p==="crossorigin"?u.attributes[p]=S:u.queryParams[p]=S,u},{queryParams:{},attributes:{}}),d=c.queryParams,i=c.attributes;return d["merchant-id"]&&d["merchant-id"].indexOf(",")!==-1&&(i["data-merchant-id"]=d["merchant-id"],d["merchant-id"]="*"),{url:"".concat(o,"?").concat(Ft(d)),attributes:i}}function Wt(t){var e=function(r,n){return(n?"-":"")+r.toLowerCase()};return t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,e)}function Ft(t){var e="";return Object.keys(t).forEach(function(r){e.length!==0&&(e+="&"),e+=r+"="+t[r]}),e}function qt(t){return t==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function Be(t,e){e===void 0&&(e={});var r=document.createElement("script");return r.src=t,Object.keys(e).forEach(function(n){r.setAttribute(n,e[n]),n==="data-csp-nonce"&&r.setAttribute("nonce",e["data-csp-nonce"])}),r}function Gt(t,e){if(e===void 0&&(e=Promise),$e(t,e),typeof document>"u")return e.resolve(null);var r=Vt(t),n=r.url,o=r.attributes,s=o["data-namespace"]||"paypal",c=Se(s);return o["data-js-sdk-library"]||(o["data-js-sdk-library"]="paypal-js"),Bt(n,o)&&c?e.resolve(c):Kt({url:n,attributes:o},e).then(function(){var d=Se(s);if(d)return d;throw new Error("The window.".concat(s," global variable is not available."))})}function Kt(t,e){e===void 0&&(e=Promise),$e(t,e);var r=t.url,n=t.attributes;if(typeof r!="string"||r.length===0)throw new Error("Invalid url.");if(typeof n<"u"&&typeof n!="object")throw new Error("Expected attributes to be an object.");return new e(function(o,s){if(typeof document>"u")return o();$t({url:r,attributes:n,onSuccess:function(){return o()},onError:function(){var c=new Error('The script "'.concat(r,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return s(c)}})})}function Se(t){return window[t]}function $e(t,e){if(typeof t!="object"||t===null)throw new Error("Expected an options object.");var r=t.environment;if(r&&r!=="production"&&r!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof e<"u"&&typeof e!="function")throw new Error("Expected PromisePonyfill to be a function.")}var Jt=function(t){var e,r=t.options,n=r===void 0?{clientId:"test"}:r,o=t.children,s=t.deferLoading,c=s===void 0?!1:s,d=g.useReducer(_t,{options:b(b({},n),(e={},e[V.DATA_JS_SDK_LIBRARY]=V.DATA_LIBRARY_VALUE,e[V.DATA_SDK_INTEGRATION_SOURCE]=V.DATA_LIBRARY_VALUE,e[z]="".concat(Ue(n)),e)),loadingStatus:c?P.INITIAL:P.PENDING}),i=d[0],u=d[1];return g.useEffect(function(){if(c===!1&&i.loadingStatus===P.INITIAL)return u({type:$.LOADING_STATUS,value:P.PENDING});if(i.loadingStatus===P.PENDING){var p=!0;return Gt(i.options).then(function(){p&&u({type:$.LOADING_STATUS,value:P.RESOLVED})}).catch(function(S){console.error("".concat(Rt," ").concat(S)),p&&u({type:$.LOADING_STATUS,value:{state:P.REJECTED,message:String(S)}})}),function(){p=!1}}},[i.options,c,i.loadingStatus]),h.createElement(Me.Provider,{value:b(b({},i),{dispatch:u})},o)};function be(){}g.createContext({cardFieldsForm:null,fields:{},registerField:be,unregisterField:be});const Yt=at("pk_test_51SthFoEH1YLsmaIgkNRxlll6FYrlnjDnpGYsMSdHrLG8GHStKe9fCAEEoIE4FVno43h8jlwevBmu7uPRSSVKtUEV00EofR2un4"),zt="test";function Xt({onSuccess:t}){const e=Pt(),r=xt(),[n,o]=g.useState(!1),[s,c]=g.useState(""),d=async i=>{if(i.preventDefault(),!e||!r)return;o(!0);const{error:u,paymentIntent:p}=await e.confirmPayment({elements:r,redirect:"if_required"});u?(c(u.message),o(!1)):p&&p.status==="succeeded"&&t("Stripe Credit Card")};return a.jsxs("form",{onSubmit:d,children:[a.jsx("h3",{style:{marginBottom:"20px"},children:"Enter Card Details"}),a.jsx(wt,{}),a.jsx("button",{className:"black-btn",style:{marginTop:"20px"},disabled:n,children:n?"Processing...":"Pay Now"}),s&&a.jsx("div",{style:{color:"red",marginTop:"10px"},children:s})]})}function Ht(){const{items:t,total:e,refresh:r}=qe(),n=Ge(),{isAuthenticated:o}=Ke(),[s,c]=g.useState("vnpay"),[d,i]=g.useState(!1),[u,p]=g.useState(""),[S,v]=g.useState(""),[m,O]=g.useState({name:"",email:"",phone:"",address:"",city:"",district:""}),[f,A]=g.useState({}),[k,W]=g.useState(""),[_,q]=g.useState(0);g.useEffect(()=>{ne.get("/auth/profile").then(({data:l})=>{O(E=>({...E,name:l.name||"",email:l.email||"",phone:l.phone||"",address:l.address||""}))}).catch(()=>{})},[]),g.useEffect(()=>{e>0&&ne.post("/orders/create-payment",{items:t}).then(l=>p(l.data.clientSecret)).catch(console.error)},[e,t]);const I=l=>{const{name:E,value:T}=l.target;O({...m,[E]:T}),f[E]&&A({...f,[E]:null})},G=()=>{const l={};return m.name.trim()||(l.name="Please enter your full name"),m.email.trim()?/\S+@\S+\.\S+/.test(m.email)||(l.email="Invalid email format"):l.email="Please enter your email",m.phone.trim()||(l.phone="Please enter your phone number"),m.address.trim()||(l.address="Please enter your address"),m.city.trim()||(l.city="Please enter your city"),m.district.trim()||(l.district="Please enter your district"),A(l),Object.keys(l).length===0},K=()=>{if(G()){if(s==="cod"){D("Cash on Delivery");return}i(!0)}},D=async l=>{var E,T;try{await ne.post("/orders",{items:t,total:e-_,deliveryInfo:m,paymentMethod:l,note:S}),localStorage.removeItem("local_cart"),await r(),n("/account"),alert(`Order Successful via ${l}!`)}catch(N){console.error(N),alert("Order failed to save: "+(((T=(E=N.response)==null?void 0:E.data)==null?void 0:T.message)||N.message))}},B=e-_;return a.jsxs("div",{className:"checkout-page",children:[a.jsx("div",{className:"page-header",children:a.jsx("button",{className:"back-btn",onClick:()=>n(-1),children:"â† Back to Shop"})}),a.jsxs("div",{className:"checkout-container",children:[a.jsxs("div",{className:"checkout-left",children:[a.jsxs("section",{children:[a.jsxs("div",{className:"left-header",children:[a.jsx("h2",{className:"section-title",children:"Delivery Information"}),!o&&a.jsx("button",{className:"login-link-btn",onClick:()=>n("/login"),children:"Login / Register"})]}),a.jsxs("div",{className:"form-grid",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:`checkout-input ${f.name?"error":""}`,name:"name",placeholder:"Full Name",value:m.name,onChange:I}),f.name&&a.jsx("span",{className:"error-msg",children:f.name})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:`checkout-input ${f.email?"error":""}`,name:"email",type:"email",placeholder:"Email Address",value:m.email,onChange:I}),f.email&&a.jsx("span",{className:"error-msg",children:f.email})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:`checkout-input ${f.phone?"error":""}`,name:"phone",placeholder:"Phone Number",value:m.phone,onChange:I}),f.phone&&a.jsx("span",{className:"error-msg",children:f.phone})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:`checkout-input ${f.address?"error":""}`,name:"address",placeholder:"Address",value:m.address,onChange:I}),f.address&&a.jsx("span",{className:"error-msg",children:f.address})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:`checkout-input ${f.city?"error":""}`,name:"city",placeholder:"Province/City",value:m.city,onChange:I}),f.city&&a.jsx("span",{className:"error-msg",children:f.city})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:`checkout-input ${f.district?"error":""}`,name:"district",placeholder:"District",value:m.district,onChange:I}),f.district&&a.jsx("span",{className:"error-msg",children:f.district})]})]}),a.jsx("textarea",{className:"checkout-input",placeholder:"Order notes (optional)",rows:3,value:S,onChange:l=>v(l.target.value)})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"section-title",children:"Shipping method"}),a.jsx("div",{className:"payment-methods",children:a.jsxs("div",{className:"payment-option selected",children:[a.jsx("input",{type:"radio",checked:!0,readOnly:!0}),a.jsx("span",{children:"Standard delivery (Free)"})]})})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"section-title",children:"Payment method"}),a.jsxs("div",{className:"payment-methods",children:[a.jsxs("div",{className:`payment-option ${s==="cod"?"selected":""}`,onClick:()=>c("cod"),children:[a.jsx("input",{type:"radio",checked:s==="cod",readOnly:!0}),a.jsx("span",{children:"Cash on Delivery (COD)"})]}),a.jsxs("div",{className:`payment-option ${s==="vnpay"?"selected":""}`,onClick:()=>c("vnpay"),children:[a.jsx("input",{type:"radio",checked:s==="vnpay",readOnly:!0}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("img",{src:"https://cdn.haitrieu.com/wp-content/uploads/2022/10/Icon-VNPAY-QR.png",height:"24",alt:"vnpay"}),a.jsx("span",{children:"VNPay Gateway"})]})]}),a.jsxs("div",{className:`payment-option ${s==="stripe"?"selected":""}`,onClick:()=>c("stripe"),children:[a.jsx("input",{type:"radio",checked:s==="stripe",readOnly:!0}),a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/6963/6963703.png",height:"24",alt:"stripe"}),a.jsx("span",{children:"Credit Card (Stripe)"})]}),a.jsxs("div",{className:`payment-option ${s==="paypal"?"selected":""}`,onClick:()=>c("paypal"),children:[a.jsx("input",{type:"radio",checked:s==="paypal",readOnly:!0}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg",height:"24",alt:"paypal"}),a.jsx("span",{children:"Gateway"})]})]})]})]})]}),a.jsx("div",{className:"checkout-right",children:a.jsxs("div",{className:"order-summary-box",children:[a.jsx("h2",{className:"summary-title",children:"Order Overview"}),a.jsx("div",{className:"order-items-scroll",children:t.map(l=>a.jsxs("div",{className:"summary-item",children:[a.jsxs("div",{style:{position:"relative"},children:[a.jsx("img",{src:l.image_url,className:"summary-img",alt:l.name}),a.jsx("span",{style:{position:"absolute",top:-8,right:-8,background:"#666",color:"#fff",borderRadius:"50%",width:20,height:20,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center"},children:l.qty})]}),a.jsxs("div",{className:"summary-details",children:[a.jsx("div",{className:"summary-name",children:l.name}),a.jsxs("div",{style:{fontSize:12,color:"#666"},children:["Size: ",l.size||"Standard"]})]}),a.jsxs("div",{className:"summary-price",children:["$",(l.price*l.qty).toFixed(2)]})]},`${l.product_id}-${l.size}`))}),a.jsxs("div",{className:"voucher-input-group",children:[a.jsx("input",{placeholder:"Discount code",value:k,onChange:l=>W(l.target.value)}),a.jsx("button",{className:"black-btn",style:{width:"auto"},onClick:()=>k==="WELCOME20"?q(e*.2):alert("Invalid"),children:"Apply"})]}),a.jsxs("div",{className:"totals-row",children:[a.jsx("span",{children:"Subtotal"}),a.jsxs("span",{children:["$",e.toFixed(2)]})]}),a.jsxs("div",{className:"totals-row",children:[a.jsx("span",{children:"Shipping"}),a.jsx("span",{children:"$0.00"})]}),a.jsxs("div",{className:"totals-row",children:[a.jsx("span",{children:"Discount"}),a.jsxs("span",{children:["-$",_.toFixed(2)]})]}),a.jsxs("div",{className:"totals-row final",children:[a.jsx("span",{children:"Total"}),a.jsxs("span",{children:["$",B.toFixed(2)]})]}),a.jsx("button",{className:"black-btn",style:{marginTop:"20px"},onClick:K,children:"Complete Order"})]})})]}),d&&a.jsx("div",{className:"payment-modal-overlay",onClick:()=>i(!1),children:a.jsxs("div",{className:"payment-modal",onClick:l=>l.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[s==="vnpay"&&a.jsx("img",{src:"https://cdn.haitrieu.com/wp-content/uploads/2022/10/Logo-VNPAY-QR-1.png",alt:"VNPay Header"}),s==="stripe"&&a.jsx("span",{children:"Secure Card Payment"}),s==="paypal"&&a.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg",height:"24",alt:"PayPal"}),a.jsx("button",{onClick:()=>i(!1),style:{background:"none",border:"none",fontSize:24,cursor:"pointer"},children:"Ã—"})]}),a.jsxs("div",{className:"modal-body",children:[s==="vnpay"&&a.jsxs("div",{className:"vnpay-gateway",children:[a.jsx("h3",{style:{textAlign:"center",marginBottom:20},children:"Select Payment Method"}),a.jsxs("div",{className:"vnpay-option",onClick:()=>D("VNPay App"),children:[a.jsx("div",{className:"vnpay-text",children:"Banking Apps (VNPay QR)"}),a.jsx("img",{src:"https://cdn.haitrieu.com/wp-content/uploads/2022/10/Icon-VNPAY-QR.png",className:"vnpay-icon",alt:"qr"})]}),a.jsxs("div",{className:"vnpay-option",onClick:()=>D("ATM Card"),children:[a.jsx("div",{className:"vnpay-text",children:"Domestic ATM Card"}),a.jsx("span",{children:"ðŸ¦"})]}),a.jsxs("div",{className:"vnpay-option",onClick:()=>D("Intl Card"),children:[a.jsx("div",{className:"vnpay-text",children:"International Card (Visa/Master)"}),a.jsxs("div",{style:{display:"flex",gap:5},children:[a.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg",height:"15",alt:"visa"}),a.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg",height:"15",alt:"master"})]})]})]}),s==="stripe"&&u&&a.jsx(Te,{options:{clientSecret:u,appearance:{theme:"stripe"}},stripe:Yt,children:a.jsx(Xt,{onSuccess:D})}),s==="paypal"&&a.jsx(Jt,{options:{"client-id":zt},children:a.jsx(oe,{style:{layout:"vertical"},createOrder:(l,E)=>E.order.create({purchase_units:[{amount:{value:B}}]}),onApprove:async(l,E)=>{await E.order.capture(),D("PayPal")}})})]})]})})]})}export{Ht as default};
